# Upstox Node Js SDK for API v2

## Introduction

The official Node.js client for communicating with the <a href="https://upstox.com/uplink/">Upstox API</a>.

Upstox API is a set of rest APIs that provide data required to build a complete investment and trading platform. Execute orders in real time, manage user portfolio, stream live market data (using Websocket), and more, with the easy to understand API collection. 

- API version: v2
- Build package: io.swagger.codegen.v3.generators.javascript.JavaScriptClientCodegen

This SDK is automatically generated by the [Swagger Codegen](https://github.com/swagger-api/swagger-codegen) project.

## Documentation.

<a href="https://upstox.com/developer/api-documentation">Upstox API Documentation</a>

## Installation

### For [Node.js](https://nodejs.org/)

#### npm

```shell
npm install upstox-js-sdk --save
```

## Examples

[Sample Implementations](examples/) can be found within `/examples` folder.

- [Websocket Market data](examples/websocket/market_data/)
- [Websocket Order updates](examples/websocket/order_updates/)

## Sandbox Mode
We recommend using the sandbox environment for testing purposes. To enable sandbox mode, set the `sandbox` flag to `true` in the client object.

```javascript
let UpstoxClient = require("upstox-js-sdk");
let sandboxClient = new UpstoxClient.ApiClient(true);
sandboxClient.authentications["OAUTH2"].accessToken = "SANDBOX_ACCESS_TOKEN";


let apiInstance = new UpstoxClient.OrderApiV3();
let body = new UpstoxClient.PlaceOrderV3Request(1,UpstoxClient.PlaceOrderV3Request.ProductEnum.D,
    UpstoxClient.PlaceOrderV3Request.ValidityEnum.DAY, 0,"NSE_EQ|INE528G01035",UpstoxClient.PlaceOrderV3Request.OrderTypeEnum.MARKET,
    UpstoxClient.PlaceOrderV3Request.TransactionTypeEnum.BUY,0,0,true);
let opt = {"slice": true}
apiInstance.placeOrder(body, opt, (error, data, response) => {
  if (error) {
    console.log("error->" + JSON.stringify(error));
  } else {
    console.log('API called successfully. Returned data: ' + JSON.stringify(data));
  }
});
```
To learn more about the sandbox environment and the available sandbox APIs, please visit the [Upstox API documentation - Sandbox](https://upstox.com/developer/api-documentation/sandbox).

## Algo Name Support

The SDK supports passing an algorithm ID for order tracking and management. When provided, the SDK will pass the algo ID as `X-Algo-Name` header.

```javascript
let UpstoxClient = require("upstox-js-sdk");
let defaultClient = UpstoxClient.ApiClient.instance;
var OAUTH2 = defaultClient.authentications["OAUTH2"];
OAUTH2.accessToken = "ACCESS_TOKEN";

let apiInstance = new UpstoxClient.OrderApiV3();
let body = new UpstoxClient.PlaceOrderV3Request(1,UpstoxClient.PlaceOrderV3Request.ProductEnum.D,
    UpstoxClient.PlaceOrderV3Request.ValidityEnum.DAY, 0,"NSE_EQ|INE528G01035",UpstoxClient.PlaceOrderV3Request.OrderTypeEnum.MARKET,
    UpstoxClient.PlaceOrderV3Request.TransactionTypeEnum.BUY,0,0,true);
let opt = {"slice": true}

apiInstance.placeOrder(body, opt, (error, data, response) => {
  if (error) {
    console.log("error->" + JSON.stringify(error));
  } else {
    console.log('API called successfully. Returned data: ' + JSON.stringify(data));
  }
}, "your-algo-name");
```

Other order methods (modify, cancel, etc.) follow the same pattern by accepting an optional algo name as the last parameter.


## Documentation for API Endpoints

- Place, Modify, and Cancel Order APIs are relative to `https://api-hft.upstox.com`
- All other APIs are relative to `https://api.upstox.com`

API Name | HTTP Request | Class | Documentation | Sample Codes
------------ | ------------- | ------------- | ------------- | -------------
**Expired Instruments** | | | |
Get Expiries | **GET** /v2/expired-instruments/expiries| *ExpiredInstrumentApi* | [API Reference](https://upstox.com/developer/api-documentation/get-expiries) | [Sample Code](https://upstox.com/developer/api-documentation/get-expiries#sample-code-nodejs_sdk)
Get Expired Option Contracts | **GET**  /v2/expired-instruments/option/contract| *ExpiredInstrumentApi* | [API Reference](https://upstox.com/developer/api-documentation/get-expired-option-contracts) | [Sample Code](https://upstox.com/developer/api-documentation/get-expired-option-contracts#sample-code-nodejs_sdk)
Get Expired Future Contracts | **GET** /v2/expired-instruments/future/contract| *ExpiredInstrumentApi* | [API Reference](https://upstox.com/developer/api-documentation/get-expired-future-contracts) | [Sample Code](https://upstox.com/developer/api-documentation/get-expired-future-contracts#sample-code-nodejs_sdk)
Get Expired Historical Candle Data | **GET** /v2/expired-instruments/historical-candle/{expired_instrument_key}/{interval}/{to_date}/{from_date}| *ExpiredInstrumentApi* | [API Reference](https://upstox.com/developer/api-documentation/get-expired-historical-candle-data) | [Sample Code](https://upstox.com/developer/api-documentation/get-expired-historical-candle-data#sample-code-nodejs_sdk)
**Login** | | | |
Get Token | **POST** /v2/login/authorization/token | *LoginApi* | [API Reference](https://upstox.com/developer/api-documentation/get-token) | [Sample Code](https://upstox.com/developer/api-documentation/get-token#sample-code-nodejs_sdk)
Access Token Request | **POST** /v3/login/auth/token/request/{client_id} | *LoginApi* | [API Reference](https://upstox.com/developer/api-documentation/access-token-request) | [Sample Code](https://upstox.com/developer/api-documentation/access-token-request#sample-code-nodejs_sdk)
Logout | **DELETE** /v2/logout | *LoginApi* | [API Reference](https://upstox.com/developer/api-documentation/logout) | [Sample Code](https://upstox.com/developer/api-documentation/logout#sample-code-nodejs_sdk)
**User** | | | |
Get Profile | **GET** /v2/user/profile | *UserApi* | [API Reference](https://upstox.com/developer/api-documentation/get-profile) | [Sample Code](https://upstox.com/developer/api-documentation/get-profile#sample-code-nodejs_sdk)
Get User Fund Margin | **GET** /v2/user/get-funds-and-margin | *UserApi* | [API Reference](https://upstox.com/developer/api-documentation/get-user-fund-margin) | [Sample Code](https://upstox.com/developer/api-documentation/get-user-fund-margin#sample-code-nodejs_sdk)
**Charges** | | | |
Get Brokerage | **GET** /v2/charges/brokerage | *ChargeApi* | [API Reference](https://upstox.com/developer/api-documentation/get-brokerage) | [Sample Code](https://upstox.com/developer/api-documentation/get-brokerage#sample-code-nodejs_sdk)
**Margins** | | | |
Margin | **POST** /v2/charges/margin | *ChargeApi* | [API Reference](https://upstox.com/developer/api-documentation/margin) | [Sample Code](https://upstox.com/developer/api-documentation/margin#sample-code-nodejs_sdk)
**Orders** | | | |
Place Order V3 | **POST** /v3/order/place | *OrderApiV3* | [API Reference](https://upstox.com/developer/api-documentation/v3/place-order) | [Sample Code](https://upstox.com/developer/api-documentation/v3/place-order#sample-code-nodejs_sdk)
Place Multi Order | **POST** /v2/order/multi/place | *OrderApi* | [API Reference](https://upstox.com/developer/api-documentation/place-multi-order) | [Sample Code](https://upstox.com/developer/api-documentation/place-multi-order#sample-code-nodejs_sdk)
Modify Order V3 | **PUT** /v3/order/modify | *OrderApiV3* | [API Reference](https://upstox.com/developer/api-documentation/v3/modify-order) | [Sample Code](https://upstox.com/developer/api-documentation/v3/modify-order#sample-code-nodejs_sdk)
Cancel Order V3 | **DELETE** /v3/order/cancel | *OrderApiV3* | [API Reference](https://upstox.com/developer/api-documentation/v3/cancel-order) | [Sample Code](https://upstox.com/developer/api-documentation/v3/cancel-order#sample-code-nodejs_sdk)
Cancel Multi Order | **DELETE** /v2/order/multi/cancel | *OrderApi* | [API Reference](https://upstox.com/developer/api-documentation/cancel-multi-order) | [Sample Code](https://upstox.com/developer/api-documentation/cancel-multi-order#sample-code-nodejs_sdk)
Exit All Position | **POST** /v2/order/positions/exit | *OrderApi* | [API Reference](https://upstox.com/developer/api-documentation/exit-all-positions) | [Sample Code](https://upstox.com/developer/api-documentation/exit-all-positions#sample-code-nodejs_sdk)
Get Order Details | **GET** /v2/order/details | *OrderApi* | [API Reference](https://upstox.com/developer/api-documentation/get-order-details) | [Sample Code](https://upstox.com/developer/api-documentation/get-order-details#sample-code-nodejs_sdk)
Get Order History | **GET** /v2/order/history | *OrderApi* | [API Reference](https://upstox.com/developer/api-documentation/get-order-history) | [Sample Code](https://upstox.com/developer/api-documentation/get-order-history#sample-code-nodejs_sdk)
Get Trades By Order | **GET** /v2/order/trades | *OrderApi* | [API Reference](https://upstox.com/developer/api-documentation/get-trades-by-order) | [Sample Code](https://upstox.com/developer/api-documentation/get-trades-by-order#sample-code-nodejs_sdk)
Get Trade History | **GET** /v2/order/trades/get-trades-for-day | *OrderApi* | [API Reference](https://upstox.com/developer/api-documentation/get-trade-history) | [Sample Code](https://upstox.com/developer/api-documentation/get-trade-history#sample-code-nodejs_sdk)
**GTT Order** | | | |
Place GTT Order | **POST** /v3/order/gtt/place | *OrderApiV3* | [API Reference](https://upstox.com/developer/api-documentation/place-gtt-order) | [Sample Code](https://upstox.com/developer/api-documentation/place-gtt-order#sample-code-nodejs_sdk)
Modify GTT Order | **PUT** /v3/order/gtt/modify | *OrderApiV3* | [API Reference](https://upstox.com/developer/api-documentation/modify-gtt-order) | [Sample Code](https://upstox.com/developer/api-documentation/modify-gtt-order#sample-code-nodejs_sdk)
Cancel GTT Order | **DELETE** /v3/order/gtt/cancel | *OrderApiV3* | [API Reference](https://upstox.com/developer/api-documentation/cancel-gtt-order) | [Sample Code](https://upstox.com/developer/api-documentation/cancel-gtt-order#sample-code-nodejs_sdk)
Get GTT Order Details | **GET** /v3/order/gtt | *OrderApiV3* | [API Reference](https://upstox.com/developer/api-documentation/get-gtt-order-details) | [Sample Code](https://upstox.com/developer/api-documentation/get-gtt-order-details#sample-code-nodejs_sdk)
**Portfolio** | | | |
Get Positions | **GET** /v2/portfolio/short-term-positions | *PortfolioApi* | [API Reference](https://upstox.com/developer/api-documentation/get-positions) | [Sample Code](https://upstox.com/developer/api-documentation/get-positions#sample-code-nodejs_sdk)
Get MTF Positions | **GET** /v3/portfolio/mtf | *PortfolioApi* | [API Reference](https://upstox.com/developer/api-documentation/get-mtf-positions) | [Sample Code](https://upstox.com/developer/api-documentation/get-mtf-positions#sample-code-nodejs_sdk)
Convert Positions | **PUT** /v2/portfolio/convert-position | *PortfolioApi* | [API Reference](https://upstox.com/developer/api-documentation/convert-positions) | [Sample Code](https://upstox.com/developer/api-documentation/convert-positions#sample-code-nodejs_sdk)
Get Holdings | **GET** /v2/portfolio/long-term-holdings | *PortfolioApi* | [API Reference](https://upstox.com/developer/api-documentation/get-holdings) | [Sample Code](https://upstox.com/developer/api-documentation/get-holdings#sample-code-nodejs_sdk)
**Trade Profit And Loss** | | | |
Get Report Meta Data | **GET** /v2/trade/profit-loss/metadata | *TradeProfitAndLossApi* | [API Reference](https://upstox.com/developer/api-documentation/get-report-meta-data) | [Sample Code](https://upstox.com/developer/api-documentation/get-report-meta-data#sample-code-nodejs_sdk)
Get Profit And Loss Report | **GET** /v2/trade/profit-loss/data | *TradeProfitAndLossApi* | [API Reference](https://upstox.com/developer/api-documentation/get-profit-and-loss-report) | [Sample Code](https://upstox.com/developer/api-documentation/get-profit-and-loss-report#sample-code-nodejs_sdk)
Get Trade Charges | **GET** /v2/trade/profit-loss/charges | *TradeProfitAndLossApi* | [API Reference](https://upstox.com/developer/api-documentation/get-trade-charges) | [Sample Code](https://upstox.com/developer/api-documentation/get-trade-charges#sample-code-nodejs_sdk)
**Historical Data** | | | |
Get Historical Candle Data V3 | **GET** /v3/historical-candle | *HistoryV3Api* | [API Reference](https://upstox.com/developer/api-documentation/v3/get-historical-candle-data) | [Sample Code](https://upstox.com/developer/api-documentation/v3/get-historical-candle-data#sample-code-nodejs_sdk)
Get Intra Day Candle Data V3 | **GET** /v3/intra-day-candle | *HistoryV3Api* | [API Reference](https://upstox.com/developer/api-documentation/v3/get-intra-day-candle-data) | [Sample Code](https://upstox.com/developer/api-documentation/v3/get-intra-day-candle-data#sample-code-nodejs_sdk)
**Market Quote** | | | |
Get Full Market Quote | **GET** /v2/market-quote/quotes | *MarketQuoteApi* | [API Reference](https://upstox.com/developer/api-documentation/get-full-market-quote) | [Sample Code](https://upstox.com/developer/api-documentation/get-full-market-quote#sample-code-nodejs_sdk)
Get Market Quote OHLC | **GET** /v2/market-quote/ohlc | *MarketQuoteApi* | [API Reference](https://upstox.com/developer/api-documentation/get-market-quote-ohlc) | [Sample Code](https://upstox.com/developer/api-documentation/get-market-quote-ohlc#sample-code-nodejs_sdk)
LTP V3 | **GET** /v3/market-quote/ltp | *MarketQuoteV3Api* | [API Reference](https://upstox.com/developer/api-documentation/ltp-v3) | [Sample Code](https://upstox.com/developer/api-documentation/ltp-v3#sample-code-nodejs_sdk)
Option Greek | **GET** /v3/market-quote/greeks | *MarketQuoteV3Api* | [API Reference](https://upstox.com/developer/api-documentation/option-greek) | [Sample Code](https://upstox.com/developer/api-documentation/option-greek#sample-code-nodejs_sdk)
**Market Information** | | | |
Get Market Holidays | **GET** /v2/market/holidays | *MarketHolidaysAndTimingsApi* | [API Reference](https://upstox.com/developer/api-documentation/get-market-holidays) | [Sample Code](https://upstox.com/developer/api-documentation/get-market-holidays#sample-code-nodejs_sdk)
Get Market Timings | **GET** /v2/market/timings | *MarketHolidaysAndTimingsApi* | [API Reference](https://upstox.com/developer/api-documentation/get-market-timings) | [Sample Code](https://upstox.com/developer/api-documentation/get-market-timings#sample-code-nodejs_sdk)
Get Market Status | **GET** /v2/market/status | *MarketHolidaysAndTimingsApi* | [API Reference](https://upstox.com/developer/api-documentation/get-market-status) | [Sample Code](https://upstox.com/developer/api-documentation/get-market-status#sample-code-nodejs_sdk)
**Option Chain** | | | |
Get Option Contracts | **GET** /v2/option/contract | *OptionsApi* | [API Reference](https://upstox.com/developer/api-documentation/get-option-contracts) | [Sample Code](https://upstox.com/developer/api-documentation/get-option-contracts#sample-code-nodejs_sdk)
Get PC Option Chain | **GET** /v2/option/chain | *OptionsApi* | [API Reference](https://upstox.com/developer/api-documentation/get-pc-option-chain) | [Sample Code](https://upstox.com/developer/api-documentation/get-pc-option-chain#sample-code-nodejs_sdk)

## Documentation for Feeder Functions

Connecting to the WebSocket for market and portfolio updates is streamlined through two primary Feeder functions:

1. **MarketDataStreamer**: Offers real-time market updates, providing a seamless way to receive instantaneous information on various market instruments.
2. **PortfolioDataStreamer**: Delivers updates related to the user's orders, enhancing the ability to track order status and portfolio changes effectively.

Both functions are designed to simplify the process of subscribing to essential data streams, ensuring users have quick and easy access to the information they need.

### Detailed Explanation of Feeder Functions

### MarketDataStreamer

The `MarketDataStreamerV3` function is designed for effortless connection to the market WebSocket, enabling users to receive instantaneous updates on various instruments. The following example demonstrates how to quickly set up and start receiving market updates for selected instrument keys:

```javascript
let UpstoxClient = require("upstox-js-sdk");
let defaultClient = UpstoxClient.ApiClient.instance;
var OAUTH2 = defaultClient.authentications["OAUTH2"];
OAUTH2.accessToken = <ACCESS_TOKEN>;

const streamer = new UpstoxClient.MarketDataStreamerV3(["MCX_FO|426268", "MCX_FO|427608"], "full");
streamer.connect();

streamer.on("message", (data) => {
  const feed = data.toString("utf-8");
  console.log(feed);
});
```

In this example, you first authenticate using an access token, then instantiate MarketDataStreamerV3 with specific instrument keys and a subscription mode. Upon connecting, the streamer listens for market updates, which are logged to the console as they arrive.

Feel free to adjust the access token placeholder and any other specifics to better fit your actual implementation or usage scenario.

### Exploring the MarketDataStreamerV3 Functionality

#### Modes
- **ltpc**: ltpc provides information solely about the most recent trade, encompassing details such as the last trade price, time of the last trade, quantity traded, and the closing price from the previous day.
- **full**: The full option offers comprehensive information, including the latest trade prices, D5 depth, 1-minute, 30-minute, and daily candlestick data, along with some additional details.
- **full_d30**: full_d30 includes Full mode data plus 30 market level quotes.      
- **option_greeks**: Contains only option greeks.

#### Functions
1. **constructor MarketDataStreamerV3(instrumentKeys, mode)**: Initializes the streamer with optional instrument keys and mode (`full`, `ltpc`, `full_d30` or `option_greeks`).
2. **connect()**: Establishes the WebSocket connection.
3. **subscribe(instrumentKeys, mode)**: Subscribes to updates for given instrument keys in the specified mode. Both parameters are mandatory.
4. **unsubscribe(instrumentKeys)**: Stops updates for the specified instrument keys.
5. **changeMode(instrumentKeys, mode)**: Switches the mode for already subscribed instrument keys.
6. **disconnect()**: Ends the active WebSocket connection.
7. **autoReconnect(enable, interval, retryCount)**: Customizes auto-reconnect functionality. Parameters include a flag to enable/disable it, the interval(in seconds) between attempts, and the maximum number of retries.

#### Events
- **open**: Emitted upon successful connection establishment.
- **close**: Indicates the WebSocket connection has been closed.
- **message**: Delivers market updates.
- **error**: Signals an error has occurred.
- **reconnecting**: Announced when a reconnect attempt is initiated.
- **autoReconnectStopped**: Informs when auto-reconnect efforts have ceased after exhausting the retry count.

The following documentation includes examples to illustrate the usage of these functions and events, providing a practical understanding of how to interact with the MarketDataStreamerV3 effectively.

<br/>

1. Subscribing to Market Data on Connection Open with MarketDataStreameV3

```javascript
let UpstoxClient = require("upstox-js-sdk");
let defaultClient = UpstoxClient.ApiClient.instance;
var OAUTH2 = defaultClient.authentications["OAUTH2"];
OAUTH2.accessToken = <ACCESS_TOKEN>;

const streamer = new UpstoxClient.MarketDataStreamerV3();
streamer.connect();

// Subscribe to instrument keys upon the 'open' event
streamer.on("open", () => {
  streamer.subscribe(["NSE_EQ|INE020B01018", "NSE_EQ|INE467B01029"], "full");
});

// Handle incoming market data messages
streamer.on("message", (data) => {
  const feed = data.toString("utf-8");
  console.log(feed);
});
```

<br/>

2. Subscribing to Instruments with Delays

```javascript
let UpstoxClient = require("upstox-js-sdk");
let defaultClient = UpstoxClient.ApiClient.instance;
var OAUTH2 = defaultClient.authentications["OAUTH2"];
OAUTH2.accessToken = <ACCESS_TOKEN>;

const streamer = new UpstoxClient.MarketDataStreamerV3();
streamer.connect();

// Subscribe to the first set of instrument keys immediately upon connection
streamer.on("open", () => {
  streamer.subscribe(["NSE_EQ|INE020B01018"], "full");
  
  // Subscribe to another set of instrument keys after a delay
  setTimeout(() => {
    streamer.subscribe(["NSE_EQ|INE467B01029"], "full");
  }, 5000); // 5-second delay before subscribing to the second set
});

// Handle incoming market data messages
streamer.on("message", (data) => {
  const feed = data.toString("utf-8");
  console.log(feed);
});
```

<br/>

3. Subscribing and Unsubscribing to Instruments

```javascript
let UpstoxClient = require("upstox-js-sdk");
let defaultClient = UpstoxClient.ApiClient.instance;
var OAUTH2 = defaultClient.authentications["OAUTH2"];
OAUTH2.accessToken = <ACCESS_TOKEN>;

const streamer = new UpstoxClient.MarketDataStreamerV3();
streamer.connect();

// Subscribe to instrument keys immediately upon connection
streamer.on("open", () => {
  console.log("Connected. Subscribing to instrument keys.");
  streamer.subscribe(["NSE_EQ|INE020B01018", "NSE_EQ|INE467B01029"], "full");
  
  // Unsubscribe after a delay
  setTimeout(() => {
    console.log("Unsubscribing from instrument keys.");
    streamer.unsubscribe(["NSE_EQ|INE020B01018", "NSE_EQ|INE467B01029"]);
  }, 5000); // Adjust delay as needed
});

streamer.on("message", (data) => {
  const feed = data.toString("utf-8");
  console.log("Market Update:", feed);
});
```

<br/>

4. Subscribe, Change Mode and Unsubscribe

```javascript
let UpstoxClient = require("upstox-js-sdk");
let defaultClient = UpstoxClient.ApiClient.instance;
var OAUTH2 = defaultClient.authentications["OAUTH2"];
OAUTH2.accessToken = <ACCESS_TOKEN>;

const streamer = new UpstoxClient.MarketDataStreamerV3();
streamer.connect();

// Initially subscribe to instrument keys in 'full' mode
streamer.on("open", async () => {
  console.log("Connected. Subscribing in full mode...");
  streamer.subscribe(["NSE_EQ|INE020B01018", "NSE_EQ|INE467B01029"], "full");

  // Change mode to 'ltpc' after a short delay
  setTimeout(() => {
    console.log("Changing subscription mode to ltpc...");
    streamer.changeMode(["NSE_EQ|INE020B01018", "NSE_EQ|INE467B01029"], "ltpc");
  }, 5000); // 5-second delay

  // Unsubscribe after another delay
  setTimeout(() => {
    console.log("Unsubscribing...");
    streamer.unsubscribe(["NSE_EQ|INE020B01018", "NSE_EQ|INE467B01029"]);
  }, 10000); // 10 seconds after subscription
});

// Setup event listeners to log messages, errors, and closure
streamer.on("message", (data) => {
  const feed = data.toString("utf-8");
  console.log("Market Update:", feed);
});
streamer.on("error", (error) => console.error("Error:", error));
streamer.on("close", () => console.log("Connection closed."));
```

<br/>

5. Disable Auto-Reconnect

```javascript
let UpstoxClient = require("upstox-js-sdk");
let defaultClient = UpstoxClient.ApiClient.instance;
var OAUTH2 = defaultClient.authentications["OAUTH2"];
OAUTH2.accessToken = <ACCESS_TOKEN>;

const streamer = new UpstoxClient.MarketDataStreamerV3();
streamer.connect();

// Disable auto-reconnect feature
streamer.autoReconnect(false);

streamer.on("autoReconnectStopped", (data) => {
  console.log(data);
});
```

<br/>

6. Modify Auto-Reconnect parameters

```javascript
let UpstoxClient = require("upstox-js-sdk");
let defaultClient = UpstoxClient.ApiClient.instance;
var OAUTH2 = defaultClient.authentications["OAUTH2"];
OAUTH2.accessToken = <ACCESS_TOKEN>;

const streamer = new UpstoxClient.MarketDataStreamerV3();
streamer.connect();

// Modify auto-reconnect parameters: enable it, set interval to 10 seconds, and retry count to 3
streamer.autoReconnect(true, 10, 3);
```

<br/>

### PortfolioDataStreamer

Connecting to the Portfolio WebSocket for real-time order updates is straightforward with the PortfolioDataStreamer function. Below is a concise guide to get you started on receiving updates:

```javascript
let UpstoxClient = require("upstox-js-sdk");
let defaultClient = UpstoxClient.ApiClient.instance;
var OAUTH2 = defaultClient.authentications["OAUTH2"];
OAUTH2.accessToken = "<ACCESS_TOKEN>";

const streamer = new UpstoxClient.PortfolioDataStreamer();
streamer.connect();

streamer.on("message", (data) => {
  const feed = data.toString("utf-8");
  console.log(feed);
});

```

This example demonstrates initializing the PortfolioDataStreamer, connecting it to the WebSocket, and setting up an event listener to receive and print order updates. Replace <ACCESS_TOKEN> with your valid access token to authenticate the session.

### Exploring the PortfolioDataStreamer Functionality

#### Functions
1. **constructor PortfolioDataStreamer(orderUpdate = true, positionUpdate = false, holdingUpdate = false, gttUpdate = false)**: Initializes the streamer with options to receive different types of updates.
2. **connect()**: Establishes the WebSocket connection.
3. **disconnect()**: Ends the active WebSocket connection.
4. **autoReconnect(enable, interval, retryCount)**: Customizes auto-reconnect functionality. Parameters include a flag to enable/disable it, the interval(in seconds) between attempts, and the maximum number of retries.

#### Update Types
- **orderUpdate**: Receive regular order updates (enabled by default)
- **positionUpdate**: Receive position updates (disabled by default)
- **holdingUpdate**: Receive holding updates (disabled by default)
- **gttUpdate**: Receive GTT order updates (disabled by default)

#### Events
- **open**: Emitted upon successful connection establishment.
- **close**: Indicates the WebSocket connection has been closed.
- **message**: Delivers portfolio updates.
- **error**: Signals an error has occurred.
- **reconnecting**: Announced when a reconnect attempt is initiated.
- **autoReconnectStopped**: Informs when auto-reconnect efforts have ceased after exhausting the retry count.

#### Example with all update types enabled:

```javascript
let UpstoxClient = require("upstox-js-sdk");
let defaultClient = UpstoxClient.ApiClient.instance;
var OAUTH2 = defaultClient.authentications["OAUTH2"];
OAUTH2.accessToken = "<ACCESS_TOKEN>";

// Enable all update types: orders, positions, holdings, and GTT orders
const streamer = new UpstoxClient.PortfolioDataStreamer(true, true, true, true);
streamer.connect();

streamer.on("message", (data) => {
  const feed = data.toString("utf-8");
  console.log(feed);
});
```

## Documentation for Models

 - [UpstoxClient.AnalyticsData](docs/AnalyticsData.md)
 - [UpstoxClient.ApiGatewayErrorResponse](docs/ApiGatewayErrorResponse.md)
 - [UpstoxClient.BatchExecutionSummary](docs/BatchExecutionSummary.md)
 - [UpstoxClient.BrokerageData](docs/BrokerageData.md)
 - [UpstoxClient.BrokerageTaxes](docs/BrokerageTaxes.md)
 - [UpstoxClient.BrokerageWrapperData](docs/BrokerageWrapperData.md)
 - [UpstoxClient.CancelOrExitMultiOrderData](docs/CancelOrExitMultiOrderData.md)
 - [UpstoxClient.CancelOrExitMultiOrderResponse](docs/CancelOrExitMultiOrderResponse.md)
 - [UpstoxClient.CancelOrExitOrderErrorData](docs/CancelOrExitOrderErrorData.md)
 - [UpstoxClient.CancelOrderData](docs/CancelOrderData.md)
 - [UpstoxClient.CancelOrderResponse](docs/CancelOrderResponse.md)
 - [UpstoxClient.CancelOrderV3Response](docs/CancelOrderV3Response.md)
 - [UpstoxClient.ConvertPositionData](docs/ConvertPositionData.md)
 - [UpstoxClient.ConvertPositionRequest](docs/ConvertPositionRequest.md)
 - [UpstoxClient.ConvertPositionResponse](docs/ConvertPositionResponse.md)
 - [UpstoxClient.Depth](docs/Depth.md)
 - [UpstoxClient.DepthMap](docs/DepthMap.md)
 - [UpstoxClient.DpPlan](docs/DpPlan.md)
 - [UpstoxClient.ExchangeTimingData](docs/ExchangeTimingData.md)
 - [UpstoxClient.ExpiredFutureData](docs/ExpiredFutureData.md)
 - [UpstoxClient.GetBrokerageResponse](docs/GetBrokerageResponse.md)
 - [UpstoxClient.GetExchangeTimingResponse](docs/GetExchangeTimingResponse.md)
 - [UpstoxClient.GetExpiredFuturesContractResponse](docs/GetExpiredFuturesContractResponse.md)
 - [UpstoxClient.GetExpiriesResponse](docs/GetExpiriesResponse.md)
 - [UpstoxClient.GetFullMarketQuoteResponse](docs/GetFullMarketQuoteResponse.md)
 - [UpstoxClient.GetGttOrderResponse](docs/GetGttOrderResponse.md)
 - [UpstoxClient.GetHistoricalCandleResponse](docs/GetHistoricalCandleResponse.md)
 - [UpstoxClient.GetHoldingsResponse](docs/GetHoldingsResponse.md)
 - [UpstoxClient.GetHolidayResponse](docs/GetHolidayResponse.md)
 - [UpstoxClient.GetIntraDayCandleResponse](docs/GetIntraDayCandleResponse.md)
 - [UpstoxClient.GetMarketQuoteLastTradedPriceResponse](docs/GetMarketQuoteLastTradedPriceResponse.md)
 - [UpstoxClient.GetMarketQuoteLastTradedPriceResponseV3](docs/GetMarketQuoteLastTradedPriceResponseV3.md)
 - [UpstoxClient.GetMarketQuoteOHLCResponse](docs/GetMarketQuoteOHLCResponse.md)
 - [UpstoxClient.GetMarketQuoteOHLCResponseV3](docs/GetMarketQuoteOHLCResponseV3.md)
 - [UpstoxClient.GetMarketQuoteOptionGreekResponseV3](docs/GetMarketQuoteOptionGreekResponseV3.md)
 - [UpstoxClient.GetMarketStatusResponse](docs/GetMarketStatusResponse.md)
 - [UpstoxClient.GetOptionChainResponse](docs/GetOptionChainResponse.md)
 - [UpstoxClient.GetOptionContractResponse](docs/GetOptionContractResponse.md)
 - [UpstoxClient.GetOrderBookResponse](docs/GetOrderBookResponse.md)
 - [UpstoxClient.GetOrderDetailsResponse](docs/GetOrderDetailsResponse.md)
 - [UpstoxClient.GetOrderResponse](docs/GetOrderResponse.md)
 - [UpstoxClient.GetPositionResponse](docs/GetPositionResponse.md)
 - [UpstoxClient.GetProfileResponse](docs/GetProfileResponse.md)
 - [UpstoxClient.GetProfitAndLossChargesResponse](docs/GetProfitAndLossChargesResponse.md)
 - [UpstoxClient.GetTradeResponse](docs/GetTradeResponse.md)
 - [UpstoxClient.GetTradeWiseProfitAndLossDataResponse](docs/GetTradeWiseProfitAndLossDataResponse.md)
 - [UpstoxClient.GetTradeWiseProfitAndLossMetaDataResponse](docs/GetTradeWiseProfitAndLossMetaDataResponse.md)
 - [UpstoxClient.GetUserFundMarginResponse](docs/GetUserFundMarginResponse.md)
 - [UpstoxClient.GttCancelOrderRequest](docs/GttCancelOrderRequest.md)
 - [UpstoxClient.GttModifyOrderRequest](docs/GttModifyOrderRequest.md)
 - [UpstoxClient.GttOrderData](docs/GttOrderData.md)
 - [UpstoxClient.GttOrderDetails](docs/GttOrderDetails.md)
 - [UpstoxClient.GttPlaceOrderRequest](docs/GttPlaceOrderRequest.md)
 - [UpstoxClient.GttRule](docs/GttRule.md)
 - [UpstoxClient.GttTriggerOrderResponse](docs/GttTriggerOrderResponse.md)
 - [UpstoxClient.HistoricalCandleData](docs/HistoricalCandleData.md)
 - [UpstoxClient.HoldingsData](docs/HoldingsData.md)
 - [UpstoxClient.HolidayData](docs/HolidayData.md)
 - [UpstoxClient.IndieUserInitTokenData](docs/IndieUserInitTokenData.md)
 - [UpstoxClient.IndieUserInitTokenResponse](docs/IndieUserInitTokenResponse.md)
 - [UpstoxClient.IndieUserTokenRequest](docs/IndieUserTokenRequest.md)
 - [UpstoxClient.Instrument](docs/Instrument.md)
 - [UpstoxClient.InstrumentData](docs/InstrumentData.md)
 - [UpstoxClient.IntraDayCandleData](docs/IntraDayCandleData.md)
 - [UpstoxClient.LogoutResponse](docs/LogoutResponse.md)
 - [UpstoxClient.Margin](docs/Margin.md)
 - [UpstoxClient.MarginData](docs/MarginData.md)
 - [UpstoxClient.MarginRequest](docs/MarginRequest.md)
 - [UpstoxClient.MarketData](docs/MarketData.md)
 - [UpstoxClient.MarketQuoteOHLC](docs/MarketQuoteOHLC.md)
 - [UpstoxClient.MarketQuoteOHLCV3](docs/MarketQuoteOHLCV3.md)
 - [UpstoxClient.MarketQuoteOptionGreekV3](docs/MarketQuoteOptionGreekV3.md)
 - [UpstoxClient.MarketQuoteSymbol](docs/MarketQuoteSymbol.md)
 - [UpstoxClient.MarketQuoteSymbolLtp](docs/MarketQuoteSymbolLtp.md)
 - [UpstoxClient.MarketQuoteSymbolLtpV3](docs/MarketQuoteSymbolLtpV3.md)
 - [UpstoxClient.MarketStatusData](docs/MarketStatusData.md)
 - [UpstoxClient.ModifyOrderData](docs/ModifyOrderData.md)
 - [UpstoxClient.ModifyOrderRequest](docs/ModifyOrderRequest.md)
 - [UpstoxClient.ModifyOrderResponse](docs/ModifyOrderResponse.md)
 - [UpstoxClient.ModifyOrderV3Response](docs/ModifyOrderV3Response.md)
 - [UpstoxClient.MultiOrderData](docs/MultiOrderData.md)
 - [UpstoxClient.MultiOrderError](docs/MultiOrderError.md)
 - [UpstoxClient.MultiOrderRequest](docs/MultiOrderRequest.md)
 - [UpstoxClient.MultiOrderResponse](docs/MultiOrderResponse.md)
 - [UpstoxClient.MultiOrderSummary](docs/MultiOrderSummary.md)
 - [UpstoxClient.MultiOrderV3Data](docs/MultiOrderV3Data.md)
 - [UpstoxClient.OAuthClientException](docs/OAuthClientException.md)
 - [UpstoxClient.OAuthClientExceptionCause](docs/OAuthClientExceptionCause.md)
 - [UpstoxClient.OAuthClientExceptionCauseStackTrace](docs/OAuthClientExceptionCauseStackTrace.md)
 - [UpstoxClient.OAuthClientExceptionCauseSuppressed](docs/OAuthClientExceptionCauseSuppressed.md)
 - [UpstoxClient.Ohlc](docs/Ohlc.md)
 - [UpstoxClient.OhlcV3](docs/OhlcV3.md)
 - [UpstoxClient.OptionStrikeData](docs/OptionStrikeData.md)
 - [UpstoxClient.OrderBookData](docs/OrderBookData.md)
 - [UpstoxClient.OrderData](docs/OrderData.md)
 - [UpstoxClient.OrderMetadata](docs/OrderMetadata.md)
 - [UpstoxClient.OtherTaxes](docs/OtherTaxes.md)
 - [UpstoxClient.PlaceOrderData](docs/PlaceOrderData.md)
 - [UpstoxClient.PlaceOrderRequest](docs/PlaceOrderRequest.md)
 - [UpstoxClient.PlaceOrderResponse](docs/PlaceOrderResponse.md)
 - [UpstoxClient.PlaceOrderV3Request](docs/PlaceOrderV3Request.md)
 - [UpstoxClient.PlaceOrderV3Response](docs/PlaceOrderV3Response.md)
 - [UpstoxClient.PositionData](docs/PositionData.md)
 - [UpstoxClient.PostMarginResponse](docs/PostMarginResponse.md)
 - [UpstoxClient.Problem](docs/Problem.md)
 - [UpstoxClient.ProfileData](docs/ProfileData.md)
 - [UpstoxClient.ProfitAndLossChargesData](docs/ProfitAndLossChargesData.md)
 - [UpstoxClient.ProfitAndLossChargesTaxes](docs/ProfitAndLossChargesTaxes.md)
 - [UpstoxClient.ProfitAndLossChargesWrapperData](docs/ProfitAndLossChargesWrapperData.md)
 - [UpstoxClient.ProfitAndLossMetaData](docs/ProfitAndLossMetaData.md)
 - [UpstoxClient.ProfitAndLossMetaDataWrapper](docs/ProfitAndLossMetaDataWrapper.md)
 - [UpstoxClient.ProfitAndLossOtherChargesTaxes](docs/ProfitAndLossOtherChargesTaxes.md)
 - [UpstoxClient.PutCallOptionChainData](docs/PutCallOptionChainData.md)
 - [UpstoxClient.Rule](docs/Rule.md)
 - [UpstoxClient.TokenRequest](docs/TokenRequest.md)
 - [UpstoxClient.TokenResponse](docs/TokenResponse.md)
 - [UpstoxClient.TradeData](docs/TradeData.md)
 - [UpstoxClient.TradeHistoryResponse](docs/TradeHistoryResponse.md)
 - [UpstoxClient.TradeHistoryResponseMetaData](docs/TradeHistoryResponseMetaData.md)
 - [UpstoxClient.TradeHistoryResponsePageData](docs/TradeHistoryResponsePageData.md)
 - [UpstoxClient.TradeHistoryResponseTradeData](docs/TradeHistoryResponseTradeData.md)
 - [UpstoxClient.TradeWiseMetaData](docs/TradeWiseMetaData.md)
 - [UpstoxClient.TradeWiseProfitAndLossData](docs/TradeWiseProfitAndLossData.md)
 - [UpstoxClient.UserFundMarginData](docs/UserFundMarginData.md)
 - [UpstoxClient.WebsocketAuthRedirectResponse](docs/WebsocketAuthRedirectResponse.md)
 - [UpstoxClient.WebsocketAuthRedirectResponseData](docs/WebsocketAuthRedirectResponseData.md)